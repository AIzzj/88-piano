# 虚拟钢琴 - 88键

一个基于Python和Pygame开发的88键虚拟钢琴应用，允许用户使用计算机键盘演奏钢琴曲，支持录制、回放功能和预设曲谱练习。界面美观，操作简便，适合钢琴初学者和音乐爱好者使用。

![虚拟钢琴界面](assets/piano_screenshot.png)

## 功能特点

- **完整的88键钢琴模拟**：支持从A0到C8的完整钢琴音域
- **直观的钢琴键盘可视化**：所有按键都有清晰的视觉反馈
- **实时响应的键盘控制**：低延迟的按键响应，提供真实的演奏体验
- **录制和回放功能**：可记录和播放您的演奏
- **40首曲目练习**：包含20首流行音乐和20首古典音乐的预设曲谱
- **键盘导航模式**：在练习时提供按键提示，帮助初学者
- **多种主题切换**：提供多种界面主题以适应不同用户偏好
- **分页浏览曲目**：便于查找和选择练习曲目
- **简洁美观的界面**：优化的用户体验设计
- **高质量钢琴音色**：提供真实的钢琴音效

## 键盘映射

应用将计算机键盘按照以下方式映射到钢琴键：

| 键区     | 键盘按键                 | 钢琴音域    |
|---------|------------------------|-----------|
| 第一排   | 1-0                    | 最低音域    |
| 第二排   | q-p                    | 第二音域    |
| 第三排   | a-l                    | 第三音域    |
| 第四排   | z-m                    | 第四音域    |
| 符号键   | ,./                    | 第五音域    |
| 符号键   | [];'`                  | 第六音域    |
| 符号键   | -=\                    | 第七音域    |
| Shift+数字 | !@#$%^&*()           | 第八音域    |
| Shift+符号和字母 | _+QWERTYUIOP     | 第九音域    |
| Shift+字母 | ASDFGHJKLZXCVBNM<>?  | 最高音域    |

## 安装

1. **克隆仓库**

```bash
git clone https://github.com/yourusername/virtual-piano.git
cd virtual-piano
```

2. **创建虚拟环境** (可选但推荐)

```bash
python -m venv .venv
# 在Windows上激活
.venv\Scripts\activate
# 在macOS/Linux上激活
source .venv/bin/activate
```

3. **安装依赖**

```bash
pip install -r requirements.txt
```

## 使用方法

运行以下命令启动虚拟钢琴：

```bash
python -m src.cli play
```

### 界面操作

- **录制**：开始录制您的演奏
- **停止**：停止录制或回放
- **录音列表**：查看和播放已保存的录音
- **曲谱库**：选择预设曲谱进行练习
- **返回**：返回主界面
- **主题**：切换界面主题

### 快捷键

- **F1**：切换键盘导航模式（显示按键提示）
- **F3**：显示/隐藏曲谱列表
- **F4**：返回主页
- **F5**：切换主题
- **方向键**：在列表中导航
- **Enter**：确认选择
- **ESC**：退出程序

### 预设曲谱练习

应用内置了40首经典曲目供您练习，包括：

#### 流行音乐
1. 月亮代表我的心
2. 大鱼
3. 童年
4. 千本樱
5. 卡农流行版
6. 蒲公英的约定
7. 天空之城
8. 小幸运
9. 告白气球
10. 光年之外
11. 起风了
12. 芒种
13. 不能说的秘密
14. 青花瓷
15. 晴天
16. 稻香
17. 漂向北方
18. 那些年
19. 夜曲
20. 同桌的你

#### 古典音乐
1. 小星星
2. 欢乐颂
3. 致爱丽丝
4. 卡农
5. 月光奏鸣曲
6. 土耳其进行曲
7. 蓝色多瑙河
8. 梁祝
9. 茉莉花
10. 两只老虎
11. 菊次郎的夏天
12. 四季歌
13. 铃儿响叮当
14. 雪绒花
15. 送别
16. 生日快乐歌
17. 我和我的祖国
18. 绿袖子
19. 春江花月夜
20. 少女的祈祷

练习方法：
1. 点击"曲谱库"按钮
2. 选择想要练习的曲目
3. 跟随屏幕上的提示按下正确的按键
4. 程序会自动跟踪您的进度并给予反馈

## 项目结构

```
/virtual-piano
├── recordings/        # 保存的录音文件目录
├── sound/             # 钢琴音符文件 (88个音符)
├── assets/            # 图像等资源文件
├── src/               # 源代码目录
│   ├── core/          # 核心业务逻辑
│   │   ├── __init__.py
│   │   └── piano.py   # 钢琴核心类
│   ├── utils/         # 工具函数
│   │   ├── __init__.py
│   │   ├── keyboard_utils.py  # 键盘工具
│   │   ├── recorder.py        # 录音和回放工具
│   │   └── music_sheets.py    # 预设曲谱
│   └── cli.py         # 命令行接口
├── requirements.txt   # 依赖项
└── README.md          # 项目说明
```

## 技术栈

- **Python 3.9+**：核心开发语言
- **Pygame 2.5.2**：图形界面和音频处理
- **Click 8.1.7**：命令行接口

## 系统要求

- **操作系统**：Windows/macOS/Linux
- **Python**：3.9 或更高版本
- **存储空间**：约100MB（包含音频文件）
- **内存**：至少500MB
- **声卡**：支持音频输出

## 贡献指南

欢迎提交问题报告、功能请求和代码贡献！请遵循以下步骤：

1. Fork 本仓库
2. 创建您的特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交您的更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 打开 Pull Request

## 许可证

本项目采用 MIT 许可证 - 详情请参阅 [LICENSE](LICENSE) 文件

## 致谢

- 感谢所有为该项目提供反馈和建议的用户
- 钢琴音源来自 [University of Iowa Electronic Music Studios](http://theremin.music.uiowa.edu/MISpiano.html)
- 特别感谢所有开源社区的支持
